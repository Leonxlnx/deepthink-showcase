<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avant-Garde | Creative Features & Testimonials</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Manrope:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>

    <style>
        /* ==========================================================================
           1. CORE VARIABLES & SETUP
           ========================================================================== */
        :root {
            /* High-End Artistic Palette (No Neon, No Tech) */
            --bg-main: #E4E1DB;
            /* Warm Oyster / Stone */
            --bg-sec: #D9D5CD;
            /* Deeper Greige */
            --text-main: #1C1A17;
            /* Deep Umber Black */
            --text-mut: #6B655C;
            /* Warm Muted Grey */
            --accent: #984A2E;
            /* Venetian Red / Rust */
            --border: rgba(28, 26, 23, 0.12);

            --font-serif: 'Cormorant Garamond', serif;
            --font-sans: 'Manrope', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-main);
            color: var(--text-main);
            font-family: var(--font-sans);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            cursor: none;
            /* Replaced by custom cursor */
        }

        ::selection {
            background-color: var(--accent);
            color: #E4E1DB;
        }

        .serif {
            font-family: var(--font-serif);
        }

        /* Smooth Scroll Fixes */
        html.lenis {
            height: auto;
        }

        .lenis.lenis-smooth {
            scroll-behavior: auto;
        }

        .lenis.lenis-smooth [data-lenis-prevent] {
            overscroll-behavior: contain;
        }

        .lenis.lenis-stopped {
            overflow: hidden;
        }

        /* ==========================================================================
           2. GLOBAL MICRO-ANIMATIONS & OVERLAYS
           ========================================================================== */

        /* Subtle Cinematic Film Grain */
        .noise-overlay {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.045;
            mix-blend-mode: multiply;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
        }

        /* Magnetic Custom Cursor */
        .cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            width: 6px;
            height: 6px;
            background: var(--accent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 10000;
        }

        .cursor-ring {
            position: fixed;
            top: 0;
            left: 0;
            width: 40px;
            height: 40px;
            border: 1px solid var(--text-main);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9998;
            transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1), height 0.3s cubic-bezier(0.16, 1, 0.3, 1), background 0.3s ease, border-color 0.3s ease;
        }

        .cursor-ring.hover {
            width: 80px;
            height: 80px;
            background: rgba(152, 74, 46, 0.05);
            border-color: var(--accent);
            backdrop-filter: blur(2px);
        }

        @media (hover: none) and (pointer: coarse) {

            .cursor-dot,
            .cursor-ring {
                display: none !important;
            }

            * {
                cursor: auto !important;
            }
        }

        /* ==========================================================================
           3. FEATURES SECTION (The Staggered Canvas)
           ========================================================================== */
        .features {
            padding: 12vw 5vw 8vw 5vw;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        .f-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 5vw;
        }

        .f-header h2 {
            font-size: clamp(3rem, 6vw, 5.5rem);
            line-height: 1.05;
            font-weight: 400;
        }

        .f-header h2 i {
            color: var(--accent);
            font-style: italic;
            font-weight: 300;
        }

        .f-subtitle {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--text-mut);
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 1vw;
            font-weight: 600;
        }

        .f-subtitle::before {
            content: '';
            width: 50px;
            height: 1px;
            background-color: var(--accent);
        }

        /* Fluid Staggered Accordion - No Bento Boxes */
        .f-accordion {
            display: flex;
            height: 65vh;
            gap: 1vw;
            align-items: center;
        }

        .f-panel {
            position: relative;
            flex: 1;
            height: 100%;
            border-radius: 6px;
            overflow: hidden;
            background-color: var(--bg-sec);
            cursor: none;
            transition: flex 0.8s cubic-bezier(0.16, 1, 0.3, 1), filter 0.5s ease;
        }

        .f-accordion:hover .f-panel {
            filter: grayscale(80%) opacity(0.5);
        }

        .f-accordion .f-panel:hover {
            flex: 3.5;
            filter: grayscale(0%) opacity(1);
        }

        /* Structural Staggering */
        .f-panel:nth-child(1) {
            height: 90%;
            align-self: flex-start;
        }

        .f-panel:nth-child(2) {
            height: 100%;
            align-self: center;
        }

        .f-panel:nth-child(3) {
            height: 85%;
            align-self: flex-end;
        }

        .f-panel:nth-child(4) {
            height: 95%;
            align-self: center;
        }

        .f-panel-bg {
            position: absolute;
            inset: -10%;
            width: 120%;
            height: 120%;
            object-fit: cover;
            transition: transform 1.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .f-panel:hover .f-panel-bg {
            transform: scale(0.95);
        }

        /* Glassmorphic Description Frame */
        .f-panel-content {
            position: absolute;
            bottom: 2rem;
            left: 2rem;
            right: 2rem;
            background: rgba(228, 225, 219, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            padding: 2.5rem;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            transform: translateY(30px) scale(0.95);
            opacity: 0;
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.6s ease;
            pointer-events: none;
        }

        .f-panel:hover .f-panel-content {
            transform: translateY(0) scale(1);
            opacity: 1;
            transition-delay: 0.1s;
        }

        .f-num {
            display: block;
            font-size: 1.5rem;
            font-style: italic;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .f-panel-content h3 {
            font-size: 1.6rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
            color: var(--text-main);
        }

        .f-panel-content p {
            font-size: 0.95rem;
            color: var(--text-mut);
            line-height: 1.6;
        }

        /* ==========================================================================
           4. TESTIMONIALS SECTION (The Artistic Gallery)
           ========================================================================== */
        .testimonials {
            padding: 8vw 5vw 10vw 5vw;
            min-height: 100vh;
            display: flex;
            position: relative;
            border-top: 1px solid var(--border);
            overflow: hidden;
        }

        /* Deep Parallax Background Quote */
        .t-huge-quote {
            position: absolute;
            top: -5%;
            left: 2%;
            font-size: 35vw;
            color: rgba(28, 26, 23, 0.035);
            line-height: 1;
            pointer-events: none;
            z-index: 0;
        }

        .t-left {
            flex: 1.2;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding-right: 8vw;
            z-index: 2;
        }

        .t-right {
            flex: 0.8;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }

        /* Staggered Word Typography */
        .t-quote-wrap {
            flex-grow: 1;
            display: flex;
            align-items: center;
            min-height: 380px;
        }

        .t-quote {
            font-size: clamp(2rem, 3.2vw, 3.5rem);
            line-height: 1.25;
            font-weight: 300;
        }

        /* Word Spans for GSAP Animation */
        .word-outer {
            display: inline-block;
            overflow: hidden;
            vertical-align: bottom;
            padding-bottom: 0.15em;
            margin-bottom: -0.15em;
            margin-right: 0.25em;
        }

        .word-inner {
            display: inline-block;
            will-change: transform, opacity;
        }

        .t-footer {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 3rem;
            border-top: 1px solid var(--border);
        }

        .t-author {
            display: flex;
            flex-direction: column;
        }

        .t-name {
            font-size: 1.8rem;
            color: var(--text-main);
            margin-bottom: 0.3rem;
            font-weight: 400;
        }

        .t-role {
            font-size: 0.85rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 600;
        }

        /* Navigation Controls */
        .t-controls {
            display: flex;
            align-items: center;
            gap: 3vw;
        }

        .t-counter {
            font-size: 1.1rem;
            color: var(--text-mut);
            letter-spacing: 0.05em;
            font-weight: 400;
        }

        .t-btns {
            display: flex;
            gap: 1rem;
        }

        .btn-mag {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            transition: border-color 0.4s ease;
        }

        .btn-mag:hover {
            border-color: var(--accent);
        }

        .btn-mag svg {
            width: 22px;
            height: 22px;
            stroke: var(--text-main);
            stroke-width: 1.5;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
            will-change: transform;
        }

        /* Right Side: Artistic Image Mask Reveal */
        .t-image-wrap {
            width: 85%;
            aspect-ratio: 3/4;
            position: relative;
        }

        .t-image-mask {
            width: 100%;
            height: 100%;
            border-radius: 150px 150px 10px 10px;
            /* Sculptural arch frame */
            overflow: hidden;
            position: relative;
        }

        .t-image-mask img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scale(1.05);
            transition: transform 8s ease-out;
        }

        .t-image-wrap:hover img {
            transform: scale(1.15);
        }

        /* Orbiting Artistic Detail */
        .circular-badge {
            position: absolute;
            bottom: -35px;
            right: -35px;
            width: 140px;
            height: 140px;
            animation: spin 20s linear infinite;
            z-index: 10;
            pointer-events: none;
        }

        .circular-badge text {
            font-size: 10.5px;
            font-weight: 600;
            letter-spacing: 0.18em;
            fill: var(--accent);
            text-transform: uppercase;
            font-family: var(--font-sans);
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        /* ==========================================================================
           5. RESPONSIVE DESIGN
           ========================================================================== */
        @media (max-width: 1024px) {
            .f-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 2rem;
            }

            .f-accordion {
                flex-direction: column;
                height: auto;
                gap: 2rem;
            }

            .f-panel {
                width: 100%;
                height: 420px !important;
                flex: none !important;
                filter: none !important;
            }

            .f-panel-content {
                transform: translateY(0) scale(1);
                opacity: 1;
                pointer-events: auto;
            }

            .testimonials {
                flex-direction: column;
                padding: 12vw 5vw;
                gap: 10vw;
            }

            .t-left {
                padding-right: 0;
            }

            .t-quote-wrap {
                min-height: auto;
                margin-bottom: 3rem;
            }

            .t-image-wrap {
                width: 100%;
            }

            .t-footer {
                flex-direction: column;
                align-items: flex-start;
                gap: 2rem;
            }

            .t-controls {
                width: 100%;
                justify-content: space-between;
            }

            .t-huge-quote {
                font-size: 50vw;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .f-header h2 {
                font-size: 3rem;
            }

            .t-quote {
                font-size: 1.8rem;
            }

            .btn-mag {
                cursor: pointer;
            }

            .t-image-mask {
                border-radius: 80px 80px 10px 10px;
            }

            .circular-badge {
                display: none;
            }
        }
    </style>
</head>

<body>

    <div class="noise-overlay"></div>

    <div class="cursor-dot"></div>
    <div class="cursor-ring"></div>

    <section class="features" id="features">
        <div class="f-header gsap-reveal">
            <h2 class="serif">The Disciplines <br><i>of Form</i></h2>
            <div class="f-subtitle">01 &mdash; Mastery</div>
        </div>

        <div class="f-accordion">
            <div class="f-panel interactable">
                <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=1200&auto=format&fit=crop"
                    alt="Spatial Flow" class="f-panel-bg">
                <div class="f-panel-content">
                    <span class="f-num serif">I</span>
                    <h3>Spatial Flow</h3>
                    <p>We engineer light and negative space to create breathing environments. Every line is meticulously
                        drawn to guide the human experience naturally.</p>
                </div>
            </div>

            <div class="f-panel interactable">
                <img src="https://images.unsplash.com/photo-1513694203232-719a280e022f?q=80&w=1200&auto=format&fit=crop"
                    alt="Materiality" class="f-panel-bg">
                <div class="f-panel-content">
                    <span class="f-num serif">II</span>
                    <h3>Materiality</h3>
                    <p>Sourcing raw, authentic textures that ground the aesthetic experience. We let the innate
                        character of stone, wood, and steel speak for themselves.</p>
                </div>
            </div>

            <div class="f-panel interactable">
                <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=1200&auto=format&fit=crop"
                    alt="Acoustic Harmony" class="f-panel-bg">
                <div class="f-panel-content">
                    <span class="f-num serif">III</span>
                    <h3>Structural Harmony</h3>
                    <p>Sculpting the unseen. Every corner, curve, and surface is geometrically designed for perfect
                        resonance, balancing avant-garde visual weight.</p>
                </div>
            </div>

            <div class="f-panel interactable">
                <img src="https://images.unsplash.com/photo-1509395176047-4a66953fd231?q=80&w=1200&auto=format&fit=crop"
                    alt="Timeless Form" class="f-panel-bg">
                <div class="f-panel-content">
                    <span class="f-num serif">IV</span>
                    <h3>Timeless Form</h3>
                    <p>Transcending transient trends with extreme geometric purity and structural integrity. We design
                        monumental spaces built for legacy and memory.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="testimonials" id="testimonials">
        <div class="t-huge-quote serif">“</div>

        <div class="t-left">
            <div class="t-quote-wrap">
                <h2 class="t-quote serif" id="quote-text">
                </h2>
            </div>

            <div class="t-footer">
                <div class="t-author">
                    <h4 class="t-name serif" id="author-name">Loading...</h4>
                    <span class="t-role" id="author-role">...</span>
                </div>

                <div class="t-controls">
                    <div class="t-counter serif" id="testi-counter">01 / 04</div>
                    <div class="t-btns">
                        <button class="btn-mag interactable" id="btn-prev" aria-label="Previous">
                            <svg viewBox="0 0 24 24">
                                <path d="M19 12H5M12 19l-7-7 7-7" />
                            </svg>
                        </button>
                        <button class="btn-mag interactable" id="btn-next" aria-label="Next">
                            <svg viewBox="0 0 24 24">
                                <path d="M5 12h14M12 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="t-right">
            <div class="t-image-wrap interactable">
                <div class="t-image-mask" id="image-mask">
                    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                        alt="Portrait" id="author-image">
                </div>

                <div class="circular-badge">
                    <svg viewBox="0 0 100 100">
                        <path id="circlePath" d="M 50, 50 m -37, 0 a 37,37 0 1,1 74,0 a 37,37 0 1,1 -74,0"
                            fill="none" />
                        <text>
                            <textPath href="#circlePath">
                                ARTISTRY &middot; ELEGANCE &middot; VISION &middot; EXCELLENCE &middot;
                            </textPath>
                        </text>
                    </svg>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. Lenis Smooth Scrolling ---
            const lenis = new Lenis({
                duration: 1.2,
                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            });
            function raf(time) {
                lenis.raf(time);
                requestAnimationFrame(raf);
            }
            requestAnimationFrame(raf);


            // --- 2. Magnetic Custom Cursor ---
            const cursorDot = document.querySelector('.cursor-dot');
            const cursorRing = document.querySelector('.cursor-ring');
            let mouseX = window.innerWidth / 2;
            let mouseY = window.innerHeight / 2;

            window.addEventListener('mousemove', e => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                gsap.to(cursorDot, { x: mouseX, y: mouseY, duration: 0.1 });
                gsap.to(cursorRing, { x: mouseX, y: mouseY, duration: 0.3 });
            });

            // Hover interactions mapping
            document.querySelectorAll('.interactable').forEach(el => {
                el.addEventListener('mouseenter', () => cursorRing.classList.add('hover'));
                el.addEventListener('mouseleave', () => cursorRing.classList.remove('hover'));
            });

            // Deep Magnetic Pull on Navigation Buttons
            document.querySelectorAll('.btn-mag').forEach(btn => {
                btn.addEventListener('mousemove', function (e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;
                    gsap.to(this, { x: x * 0.4, y: y * 0.4, duration: 0.3, ease: 'power2.out' });

                    const icon = this.querySelector('svg');
                    if (icon) gsap.to(icon, { x: x * 0.2, y: y * 0.2, duration: 0.3, ease: 'power2.out' });
                });
                btn.addEventListener('mouseleave', function () {
                    gsap.to(this, { x: 0, y: 0, duration: 0.5, ease: 'elastic.out(1, 0.3)' });
                    const icon = this.querySelector('svg');
                    if (icon) gsap.to(icon, { x: 0, y: 0, duration: 0.5, ease: 'elastic.out(1, 0.3)' });
                });
            });


            // --- 3. Ambient Parallax Overlay ---
            const hugeQuote = document.querySelector('.t-huge-quote');
            window.addEventListener('mousemove', (e) => {
                if (window.innerWidth > 768) {
                    const px = (e.clientX / window.innerWidth - 0.5) * 40;
                    const py = (e.clientY / window.innerHeight - 0.5) * 40;
                    gsap.to(hugeQuote, { x: px, y: py, duration: 1.5, ease: 'power2.out' });
                }
            });


            // --- 4. Scroll Revealing GSAP ---
            gsap.registerPlugin(ScrollTrigger);

            // Simple text reveals
            gsap.utils.toArray('.gsap-reveal').forEach(el => {
                gsap.fromTo(el,
                    { y: 50, opacity: 0 },
                    { y: 0, opacity: 1, duration: 1, ease: 'power3.out', scrollTrigger: { trigger: el, start: "top 85%" } }
                );
            });

            // Accordion staggered reveal
            gsap.fromTo('.f-panel',
                { y: 80, opacity: 0 },
                { y: 0, opacity: 1, duration: 1, stagger: 0.1, ease: 'power3.out', scrollTrigger: { trigger: '.f-accordion', start: "top 80%" } }
            );


            // --- 5. High-Fidelity Testimonial Kinematics ---
            const testimonialsData = [
                {
                    quote: "Their meticulous attention to spatial flow completely transformed our gallery. It’s not just design; it’s an invisible choreography of light and form.",
                    name: "Elara Vance",
                    role: "Director, Maison Art",
                    image: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=1000&auto=format&fit=crop"
                },
                {
                    quote: "Working with them felt like stepping into a new paradigm of aesthetics. They balance raw materiality with refined elegance in a way I've never seen before.",
                    name: "Julian Thorne",
                    role: "Creative Lead, Studio Blanc",
                    image: "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=1000&auto=format&fit=crop"
                },
                {
                    quote: "A rare synthesis of uncompromising vision and flawless execution. They elevated our brand's physical presence to an absolute masterpiece.",
                    name: "Sophia Laurent",
                    role: "Publisher, Avant-Garde",
                    image: "https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?q=80&w=1000&auto=format&fit=crop"
                },
                {
                    quote: "Every detail is intentional. They managed to capture the profound silence of fine art and translate it into an environment that breathes.",
                    name: "Marcus Aurelius",
                    role: "Chief Curator, The Altus",
                    image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop"
                }
            ];

            let currentIndex = 0;
            let isAnimating = false;

            const quoteContainer = document.getElementById('quote-text');
            const nameEl = document.getElementById('author-name');
            const roleEl = document.getElementById('author-role');
            const imageEl = document.getElementById('author-image');
            const maskEl = document.getElementById('image-mask');
            const counterEl = document.getElementById('testi-counter');

            // Text Splitter Utility for Staggered Animation
            function createTextSpans(text) {
                quoteContainer.innerHTML = '';
                const words = text.split(' ');
                words.forEach(w => {
                    const outer = document.createElement('span');
                    outer.className = 'word-outer';
                    const inner = document.createElement('span');
                    inner.className = 'word-inner';
                    inner.innerHTML = w;
                    outer.appendChild(inner);
                    quoteContainer.appendChild(outer);
                    quoteContainer.appendChild(document.createTextNode(' '));
                });
            }

            // Initialization state
            createTextSpans(testimonialsData[0].quote);
            nameEl.textContent = testimonialsData[0].name;
            roleEl.textContent = testimonialsData[0].role;
            imageEl.src = testimonialsData[0].image;
            counterEl.textContent = `01 / 0${testimonialsData.length}`;

            const initWords = quoteContainer.querySelectorAll('.word-inner');
            gsap.set(initWords, { y: '110%', opacity: 0 });
            gsap.set([nameEl, roleEl], { y: 15, opacity: 0 });
            gsap.set(maskEl, { clipPath: 'inset(100% 0 0 0)' });

            // Scroll trigger to animate Testimonial in
            ScrollTrigger.create({
                trigger: '.testimonials',
                start: "top 60%",
                once: true,
                onEnter: () => {
                    gsap.to(initWords, { y: '0%', opacity: 1, duration: 0.8, stagger: 0.02, ease: 'power3.out' });
                    gsap.to([nameEl, roleEl], { y: 0, opacity: 1, duration: 0.8, stagger: 0.1, ease: 'power3.out', delay: 0.3 });
                    gsap.to(maskEl, { clipPath: 'inset(0 0 0 0)', duration: 1.2, ease: 'power3.out' });
                }
            });

            // Master Transition Function
            function updateTestimonial(newIndex, direction) {
                if (isAnimating) return;
                isAnimating = true;

                const currentWords = quoteContainer.querySelectorAll('.word-inner');
                const tl = gsap.timeline({
                    onComplete: () => { isAnimating = false; currentIndex = newIndex; }
                });

                // Phase 1: Exiting old content
                tl.to(currentWords, { y: '-110%', opacity: 0, duration: 0.4, stagger: 0.01, ease: 'power2.in' }, 0);
                tl.to([nameEl, roleEl], { y: -15, opacity: 0, duration: 0.3, ease: 'power2.in' }, 0);

                // Mask wipe direction
                const exitClip = direction === 'next' ? 'inset(0 0 100% 0)' : 'inset(100% 0 0 0)';
                const enterClip = direction === 'next' ? 'inset(100% 0 0 0)' : 'inset(0 0 100% 0)';
                tl.to(maskEl, { clipPath: exitClip, duration: 0.6, ease: 'power3.inOut' }, 0);

                // Phase 2: Content Swap & Entering new content
                tl.call(() => {
                    // Inject new data
                    createTextSpans(testimonialsData[newIndex].quote);
                    nameEl.textContent = testimonialsData[newIndex].name;
                    roleEl.textContent = testimonialsData[newIndex].role;
                    imageEl.src = testimonialsData[newIndex].image;
                    counterEl.textContent = `0${newIndex + 1} / 0${testimonialsData.length}`;

                    const newWords = quoteContainer.querySelectorAll('.word-inner');

                    // Stagger intro
                    gsap.fromTo(newWords,
                        { y: '110%', opacity: 0 },
                        { y: '0%', opacity: 1, duration: 0.6, stagger: 0.02, ease: 'power3.out' }
                    );
                    gsap.fromTo([nameEl, roleEl],
                        { y: 15, opacity: 0 },
                        { y: 0, opacity: 1, duration: 0.6, stagger: 0.1, ease: 'power3.out' }
                    );
                });

                // Image reveal
                tl.fromTo(maskEl, { clipPath: enterClip }, { clipPath: 'inset(0 0 0 0)', duration: 0.8, ease: 'power3.out' }, "+=0.05");
            }

            // Bind Actions
            document.getElementById('btn-next').addEventListener('click', () => {
                updateTestimonial((currentIndex + 1) % testimonialsData.length, 'next');
            });
            document.getElementById('btn-prev').addEventListener('click', () => {
                updateTestimonial((currentIndex - 1 + testimonialsData.length) % testimonialsData.length, 'prev');
            });

        });
    </script>
</body>

</html>